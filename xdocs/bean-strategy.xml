<?xml version="1.0"?>
<!-- 
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<document>
	<properties>
		<author email="christophe.lombart@gmail.com">Christophe Lombart</author>
		<title>Simple Object Mapping Strategies</title>
	</properties>
	<body>
				
		<section name="Mapping Bean Fields">
			<subsection name="Introduction">
				<p>The bean-descriptor maps a bean attribute into one JCR node. Generally, this bean attribute is a also a bean.</p>
				<p>Based on our model defined <a href="introduction-strategies.html">here</a>, the following bean-descriptor is used to map the bean field "pageInfo" (PageInfo class) into the JCR node called "pageInfo".</p>

				<source><![CDATA[ 				
<class-descriptor className="org.apache.portals.graffito.jcr.testmodel.Page" jcrNodeType="graffito:page">
	<bean-descriptor fieldName="pageInfo" jcrName="pageInfo" />
	<!-- other field, bean and collection mapping here !-->
</class-descriptor>
									
<class-descriptor className="org.apache.portals.graffito.jcr.testmodel.PageInfo" jcrNodeType="graffito:PageInfo">
	<field-descriptor fieldName="path" path="true" />
	<field-descriptor fieldName="title" jcrName="graffito:title"/>
	<field-descriptor fieldName="description" jcrName="graffito:description"/>
</class-descriptor>
									
				]]></source>
				
				<p>In this example, the PageInfo class has a corresponding class-descriptor in the mapping file. 
				   By this way, the Persistence Manager can map each PageInfo attributes.
				   It is not necessary to specify the type in the bean-descriptor. The Persistence Manager uses the java introspection to get information on the each bean fields.</p>

			</subsection>
			
			<subsection name ="Result in the JCR repository">
				<p>
					Following our example, the resulting JCR structure can be : 		
				</p>
				<p>
					<source><![CDATA[ 
/mysite/page1	
  /mysite/page1/pageInfo
       graffito:title = "This is my page title"
       graffito:description = "This is my page description"
  ... other subnodes for page1 ... 
							  ]]></source>		  
				</p>						
				<p>Creating a subnode like this example (mysite/page1/pageInfo) is the default behaviour. See the section <a href="advance-beans-strategy.html">Reviewing the bean-descriptor</a> to get other bean-field mapping strategies.</p>
				
			
			</subsection>
		</section>
	</body>
</document>
